"use strict";!function(){window.popup=function(){e.popupForm&&e.toggleButton.addEventListener("click",function(e,n){return function(){e.classList.toggle(n)}}(e.popupForm,"order__form_hidden"),!1)};var e={toggleButton:document.getElementById("order-button-toggle"),popupForm:document.getElementById("order-form-popup")}}(),function(){window.doubleRange=function(){n.handlers()&&(e.handleMin.addEventListener("mousedown",u,!1),e.handleMax.addEventListener("mousedown",l,!1),e.handleMin.addEventListener("touchstart",m,!1),e.handleMax.addEventListener("touchstart",h,!1),e.handleMin.addEventListener("dragstart",s,!1),e.handleMax.addEventListener("dragstart",s,!1));n.inputs()&&(e.inputMin.addEventListener("change",f,!1),e.inputMax.addEventListener("change",f,!1))};var e={container:document.querySelector(".filter__price-range"),selected:document.querySelector(".filter__price-select"),handleMin:document.querySelector(".filter__price-handler_min"),handleMax:document.querySelector(".filter__price-handler_max"),inputMin:document.querySelector("#filter-price-input-min"),inputMax:document.querySelector("#filter-price-input-max")},n={handlers:function(){return e.container&&e.handleMin&&e.handleMax},inputs:function(){return e.container&&e.inputMin&&e.inputMax}};var t={minRange:0,maxRange:5e3,defaultMin:0,defaultMax:3e3},a={valueMin:t.defaultMin,distanceMin:function(){return E(this.valueMin)},valueMax:t.defaultMax,distanceMax:function(){return E(this.valueMax)}},i={shiftX:0,numericalRange:function(){return t.maxRange-t.minRange},minRangePossibleValue:function(){return t.minRange},maxMinPossibleValue:function(){return a.valueMax},minMaxPossibleValue:function(){return a.valueMin},maxRangePossibleValue:function(){return t.maxRange}};function u(n){i.shiftX=n.pageX-V(e.selected).left,document.addEventListener("mousemove",o,!1)}function o(){var n=event.pageX-V(e.container).left-i.shiftX,t=L(n=X(n,i.minRangePossibleValue(),i.maxMinPossibleValue()));b(e.handleMin,n),R(e.inputMin,Math.floor(t)),a.valueMin=Math.floor(t),e.inputMin.defaultValue=a.valueMin,document.addEventListener("mouseup",r,!1)}function r(){return document.removeEventListener("mousemove",o),!1}function l(){i.shiftX=event.pageX-V(e.selected).right,document.addEventListener("mousemove",d,!1)}function d(){var n=event.pageX-V(e.container).left-i.shiftX,t=L(n=X(n,i.minMaxPossibleValue(),i.maxRangePossibleValue()));b(e.handleMax,n),R(e.inputMax,Math.floor(t)),a.valueMax=Math.floor(t),e.inputMax.defaultValue=a.valueMax,document.addEventListener("mouseup",c,!1)}function c(){return document.removeEventListener("mousemove",d,!1),!1}function s(){event.preventDefault()}function f(n){var t=n.target.value;if("input-min"===n.target.dataset.range){if(!x("min",t))return n.target.value=n.target.defaultValue,!1;n.target.defaultValue=t,b(e.handleMin,E(t)),a.valueMin=t}if("input-max"===n.target.dataset.range){if(!x("max",t))return n.target.value=n.target.defaultValue,!1;n.target.defaultValue=t,b(e.handleMax,E(t)),a.valueMax=t}}function m(n){i.shiftX=n.touches[0].pageX-V(e.selected).left,document.addEventListener("touchmove",M,!1)}function M(n){var t=n.touches[0].pageX-V(e.container).left-i.shiftX,u=L(t=X(t,i.minRangePossibleValue(),i.maxMinPossibleValue()));b(e.handleMin,t),R(e.inputMin,Math.floor(u)),a.valueMin=Math.floor(u),e.inputMin.defaultValue=a.valueMin,document.addEventListener("touchend",v,!1)}function v(e){return document.removeEventListener("touchmove",M),!1}function h(n){i.shiftX=n.touches[0].pageX-V(e.selected).right,document.addEventListener("touchmove",g,!1)}function g(n){var t=n.touches[0].pageX-V(e.container).left-i.shiftX,u=L(t=X(t,i.minMaxPossibleValue(),i.maxRangePossibleValue()));b(e.handleMax,t),R(e.inputMax,Math.floor(u)),a.valueMax=Math.floor(u),e.inputMax.defaultValue=a.valueMax,document.addEventListener("touchend",p,!1)}function p(e){return document.removeEventListener("touchmove",g),!1}function x(e,n){return!!isFinite(n)&&("min"===e?!(n<i.minRangePossibleValue()||n>i.maxMinPossibleValue()):"max"===e?!(n<i.minMaxPossibleValue()||n>i.maxRangePossibleValue()):void 0)}function V(e){var n=e.getBoundingClientRect();return{left:n.left,right:n.right}}function E(n){return n*e.container.offsetWidth/i.numericalRange()}function L(n){return n*i.numericalRange()/e.container.offsetWidth}function R(e,n){e.value=n}function b(n,t){"handler-min"===n.dataset.range&&(e.selected.style.left=t+"px"),"handler-max"===n.dataset.range&&(e.selected.style.right=e.container.offsetWidth-t+"px")}function X(e,n,t){var a=E(n),i=E(t);return e<a&&(e=a),e>i&&(e=i),e}n.handlers()&&(R(e.inputMin,t.defaultMin),R(e.inputMax,t.defaultMax),b(e.handleMin,E(t.defaultMin)),b(e.handleMax,E(t.defaultMax)))}(),popup(),doubleRange();