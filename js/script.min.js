"use strict";!function(){window.popup=function(){e.popupForm&&e.toggleButton.addEventListener("click",function(e,n){return function(){e.classList.toggle(n)}}(e.popupForm,"order__form_hidden"),!1)};var e={toggleButton:document.getElementById("order-button-toggle"),popupForm:document.getElementById("order-form-popup")}}(),function(){window.doubleRange=function(){n()&&(e.handleMin.addEventListener("mousedown",d,!1),e.handleMax.addEventListener("mousedown",f,!1),e.handleMin.addEventListener("touchstart",p,!1),e.handleMax.addEventListener("touchstart",V,!1),e.handleMin.addEventListener("dragstart",M,!1),e.handleMax.addEventListener("dragstart",M,!1));t()&&(e.inputMin.addEventListener("change",h,!1),e.inputMax.addEventListener("change",h,!1))};var e={container:document.querySelector(".filter__price-range"),selected:document.querySelector(".filter__price-select"),handleMin:document.querySelector(".filter__price-handler_min"),handleMax:document.querySelector(".filter__price-handler_max"),inputMin:document.querySelector("#filter-price-input-min"),inputMax:document.querySelector("#filter-price-input-max")},n=function(){return e.container&&e.handleMin&&e.handleMax},t=function(){return e.container&&e.inputMin&&e.inputMax};var a=0,i=5e3,u=0,o=3e3,r={valueMin:u,distanceMin:function(){return P(this.valueMin)},valueMax:o,distanceMax:function(){return P(this.valueMax)}},l={shiftX:0,numericalRange:function(){return i-a},minRangePossibleValue:function(){return a},maxMinPossibleValue:function(){return r.valueMax},minMaxPossibleValue:function(){return r.valueMin},maxRangePossibleValue:function(){return i}};function d(n){l.shiftX=n.pageX-X(e.selected).left,document.addEventListener("mousemove",c,!1)}function c(){var n=event.pageX-X(e.container).left-l.shiftX,t=R(n=q(n,l.minRangePossibleValue(),l.maxMinPossibleValue()));y(e.handleMin,n),_(e.inputMin,Math.floor(t)),r.valueMin=Math.floor(t),e.inputMin.defaultValue=r.valueMin,document.addEventListener("mouseup",s,!1)}function s(){return document.removeEventListener("mousemove",c),!1}function f(){l.shiftX=event.pageX-X(e.selected).right,document.addEventListener("mousemove",m,!1)}function m(){var n=event.pageX-X(e.container).left-l.shiftX,t=R(n=q(n,l.minMaxPossibleValue(),l.maxRangePossibleValue()));y(e.handleMax,n),_(e.inputMax,Math.floor(t)),r.valueMax=Math.floor(t),e.inputMax.defaultValue=r.valueMax,document.addEventListener("mouseup",v,!1)}function v(){return document.removeEventListener("mousemove",m,!1),!1}function M(){event.preventDefault()}function h(n){var t=n.target.value;if("input-min"===n.target.dataset.range){if(!b("min",t))return n.target.value=n.target.defaultValue,!1;n.target.defaultValue=t,y(e.handleMin,P(t)),r.valueMin=t}if("input-max"===n.target.dataset.range){if(!b("max",t))return n.target.value=n.target.defaultValue,!1;n.target.defaultValue=t,y(e.handleMax,P(t)),r.valueMax=t}}function p(n){l.shiftX=n.touches[0].pageX-X(e.selected).left,document.addEventListener("touchmove",g,!1)}function g(n){var t=n.touches[0].pageX-X(e.container).left-l.shiftX,a=R(t=q(t,l.minRangePossibleValue(),l.maxMinPossibleValue()));y(e.handleMin,t),_(e.inputMin,Math.floor(a)),r.valueMin=Math.floor(a),e.inputMin.defaultValue=r.valueMin,document.addEventListener("touchend",x,!1)}function x(e){return document.removeEventListener("touchmove",g),!1}function V(n){l.shiftX=n.touches[0].pageX-X(e.selected).right,document.addEventListener("touchmove",E,!1)}function E(n){var t=n.touches[0].pageX-X(e.container).left-l.shiftX,a=R(t=q(t,l.minMaxPossibleValue(),l.maxRangePossibleValue()));y(e.handleMax,t),_(e.inputMax,Math.floor(a)),r.valueMax=Math.floor(a),e.inputMax.defaultValue=r.valueMax,document.addEventListener("touchend",L,!1)}function L(e){return document.removeEventListener("touchmove",E),!1}function b(e,n){return!!isFinite(n)&&("min"===e?!(n<l.minRangePossibleValue()||n>l.maxMinPossibleValue()):"max"===e?!(n<l.minMaxPossibleValue()||n>l.maxRangePossibleValue()):void 0)}function X(e){var n=e.getBoundingClientRect();return{left:n.left,right:n.right}}function P(n){return n*e.container.offsetWidth/l.numericalRange()}function R(n){return n*l.numericalRange()/e.container.offsetWidth}function _(e,n){e.value=n}function y(n,t){"handler-min"===n.dataset.range&&(e.selected.style.left=t+"px"),"handler-max"===n.dataset.range&&(e.selected.style.right=e.container.offsetWidth-t+"px")}function q(e,n,t){var a=P(n),i=P(t);return e<a&&(e=a),e>i&&(e=i),e}n()&&(_(e.inputMin,u),_(e.inputMax,o),y(e.handleMin,P(u)),y(e.handleMax,P(o)))}(),popup(),doubleRange();